<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
	<!-- Strip down this example until it is ready for use with dir paginate -->
  <title>READY FOR DIR-PAGINATE</title>
  <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.4.7/angular.js"></script>
	
	<!-- Bootstrap wants JQuery... -->
	<script src="https://code.jquery.com/jquery-2.1.4.js" type="text/javascript"></script>
	
	<!-- Bootstrap -->
	<link href="http://netdna.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap.min.css" rel="stylesheet" media="screen">
  <script src="http://netdna.bootstrapcdn.com/bootstrap/3.3.1/js/bootstrap.min.js" type="text/javascript"></script>
	

	<!-- WE DONT NEED TO USE NgTable, use DirPaginate instead!
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/ng-table/0.8.3/ng-table.css">
	<script src="https://cdnjs.cloudflare.com/ajax/libs/ng-table/0.8.3/ng-table.js"></script>
	-->
	
</head>
<!-- AUTHOR: JMadison.  ON:2015.11.24_0209PM                                 -->
<!-- TABSIZE: 2 Spaces.                                                      -->
<!-- This header belongs BELOW the <head></head> declaration.                -->
<!--   10|       20|       30|       40|       50|       60|       70|       -->
<!--5678901234567890123456789012345678901234567890123456789012345678901234567-->
<body>



<div id="angular_div"
data-ng-app="myApp" data-ng-controller="myCtrl" data-ng-init="VI();" >

<p id="demo"></p>

<table class="table table-striped table-hover">
	<thead>
		<tr>
			<th>First Name
				<span class="glyphicon sort-icon" ng-show="sort_key==='first_name'"
				ng-class="{'glyphicon-chevron-up':sort_rev,'glyphicon-chevron-down':!sort_rev}"
				ng-click="revSort();">
				</span>
			
				<input type="text" class="form-control" placeholder="Search" 
				data-ng-model="fname_SS" ng-change="fnameUP()" ng-click="onClickFName()">
			</th>
			
			<th>Last Name 
				<span class="glyphicon sort-icon" ng-show="sort_key==='last_name'"
				ng-class="{'glyphicon-chevron-up':sort_rev,'glyphicon-chevron-down':!sort_rev}"
				ng-click="revSort();">
				</span>
			
				<input type="text" class="form-control" placeholder="Search" 
				data-ng-model="lname_SS" ng-change="lnameUP()" ng-click="onClickLName()">
			</th>
			
			<th>Email
				<span class="glyphicon sort-icon" ng-show="sort_key==='email'"
				ng-class="{'glyphicon-chevron-up':sort_rev,'glyphicon-chevron-down':!sort_rev}"
				ng-click="revSort();">
				</span>
			
				<input type="text" class="form-control" placeholder="Search" 
				data-ng-model="email_SS" ng-change="emailUP()" ng-click="onClickEmail()">
			</th>
			
			<th> Skill 
				<span class="glyphicon sort-icon" ng-show="sort_key==='skill'"
				ng-class="{'glyphicon-chevron-up':sort_rev,'glyphicon-chevron-down':!sort_rev}"
				ng-click="revSort();">
				</span>
			    
			  <input type="text" class="form-control" placeholder="Search"  
			  data-ng-model="skill_SS" ng-change="skillUP()" ng-click="onClickSkill()">
		  </th>
			
			<th> Completed Date
				<span class="glyphicon sort-icon" ng-show="sort_key==='completed'"
				ng-class="{'glyphicon-chevron-up':sort_rev,'glyphicon-chevron-down':!sort_rev}"
				ng-click="revSort();">
				</span>
			    
			  <input type="text" class="form-control" placeholder="Search"  
			  data-ng-model="completed_SS" ng-change="completedUP()" ng-click="onClickCompleted()">
		  </th>
			
			<th> Score 
				<span class="glyphicon sort-icon" ng-show="sort_key==='score'"
				ng-class="{'glyphicon-chevron-up':sort_rev,'glyphicon-chevron-down':!sort_rev}"
				ng-click="revSort();">
				</span>
			    
			  <input type="text" class="form-control" placeholder="Search"  
			  data-ng-model="score_SS" ng-change="scoreUP()" ng-click="onClickScore()">
		  </th>
			
		</tr>
	</thead>
	<tbody>
	
	 <!--
		<tr ng-repeat="exm in exams | filter | skill_search">
		-->
		
		<tr ng-repeat="exm in exams|filter:search_string|orderBy:sort_key:sort_rev">
		
			<td>{{exm.candidate.first_name}}</td>
			<td>{{exm.candidate.last_name}}</td>
			<td>{{exm.candidate.email}}</td>
			<td>{{exm.skill.skill_name}}</td>
			<td>{{exm.completed}}</td>
			<td>{{exm.score}}</td>
			
		</tr>
	</tbody>
</table>

</div> <!-- angular_div -->


<script>
// $provide & $filterProvider:
// https://docs.angularjs.org/api/ng/provider/$filterProvider
// Used so that I can get DirPaginate example filtering.

var app = angular.module('myApp', []);
app.controller('myCtrl', function($scope, $filter, $http) {

	//variable initialization:
	$scope.VI = function(){
		
		obj = JSON.parse(document.getElementById('stuff').innerHTML);
		document.getElementById("demo").innerHTML = obj[2].token;
		$scope.exams = obj;
		

		
		$scope.sort_key = "skill"; //sort key.
		$scope.sort_rev = true;    //sort reverse?
		
		$scope.clear();
		
	};//variable init.
	
	//Flip sorting order of columns.
	$scope.revSort = function(){
		console.log("FLIP-T!");
		$scope.sort_rev = (!$scope.sort_rev);
	}
	

	
	//First-Name Search Update:
	$scope.fnameUP = function(){
		$scope.search_string = $scope.fname_SS;
	}
	
	//Last-Name Search Update:
	$scope.lnameUP = function(){
		$scope.search_string = $scope.lname_SS;
	}
	
	//Email Search Update:
	$scope.emailUP = function(){
		$scope.search_string = $scope.email_SS;
	}
	
	//Skill Search Update:
	$scope.skillUP = function(){
		$scope.search_string = $scope.skill_SS;
	}
	
	//Completed Search Update:
	$scope.completedUP = function(){
		$scope.search_string = $scope.completed_SS;
	}
	
	//Score Search Update:
	$scope.scoreUP = function(){
		$scope.search_string = $scope.score_SS;
	}
	
	//On clicking of first-name search box:
	$scope.onClickFName = function(){
		//clear search box on initial focus:
		if(true !== $scope.fname_search_in_focus){
			$scope.clear();
			$scope.fname_search_in_focus = true;
			$scope.sort_key = "first_name";
		}
	}
	
	//On clicking of last-name search box:
	$scope.onClickLName = function(){
		//clear search box on initial focus:
		if(true !== $scope.lname_search_in_focus){
			$scope.clear();
			$scope.lname_search_in_focus = true;
			$scope.sort_key = "last_name";
		}
	}
	
	//On clicking of email search box:
	$scope.onClickEmail = function(){
		//clear search box on initial focus:
		if(true !== $scope.email_search_in_focus){
			$scope.clear();
			$scope.email_search_in_focus = true;
			$scope.sort_key = "email";
		}
	}
	
	//On clicking of skill search box:
	$scope.onClickSkill = function(){
	  //clear search box on initial focus:
		if(true !== $scope.skill_search_in_focus){
			$scope.clear();
			$scope.skill_search_in_focus = true;
			$scope.sort_key = "skill";
		}
	}
	
	//On clicking of completed search box:
	$scope.onClickCompleted = function(){
	  //clear search box on initial focus:
		if(true !== $scope.completed_search_in_focus){
			$scope.clear();
			$scope.completed_search_in_focus = true;
			$scope.sort_key = "completed";
		}
	}
	
	//On clicking of score search box:
	$scope.onClickScore = function(){
	  //clear search box on initial focus:
		if(true !== $scope.score_search_in_focus){
			$scope.clear();
			$scope.score_search_in_focus = true;
			$scope.sort_key = "score";
		}
	}
	
	$scope.clear = function(){
		$scope.clearSearch();
		$scope.clearFocus();
	}
	
	//Clears all search box strings:
	$scope.clearSearch = function(){
		$scope.search_string= ""; //search string in focus.
		
		$scope.fname_SS     = ""; //first name search string.
		$scope.lname_SS     = ""; //last name search string.
		$scope.email_SS     = ""; //email search string.
		$scope.skill_SS     = ""; //skill search string.
		$scope.completed_SS = ""; //completed search string.
		$scope.score_SS     = ""; //score search string.
	}
	
	$scope.clearFocus = function(){
		//Set focus of all search boxes to false:
		$scope.fname_search_in_focus = false;
		$scope.lname_search_in_focus = false;
		$scope.email_search_in_focus = false;
		$scope.skill_search_in_focus = false;
		$scope.completed_search_in_focus = false;
		$scope.score_search_in_focus = false;
	}
	
	
	
	
});//CONTROLLER::END
</script>


<!-- //Based on data from here: http://localhost:8888/v1/admin/exams -->
<script type="application/json" id="stuff">
	[
		{
		  "completed":"1/2/3",
			"score":"12",
		
		  "status":"STATUS_000",
			"token":"TOKEN_000_ABC_DEF",
			"candidate":{"email":"EMAIL_000","first_name":"A0","last_name":"LAST_NAME_0_DAKA"},
			"skill":{"skill_name":"SKILL_NAME_0"},
			
			"exam_status":{
			"percent_complete":0,
			"exam_state":"NOTSTARTED",
			"time_remaining":3600000,
			"time_started":null,
			"time_stopped":null}
		},
		{
			"completed":"2/3/4",
			"score":"23",
		
		  "status":"STATUS_001",
			"token":"TOKEN_001_DEF_GHI",
			"candidate":{"email":"EMAIL_001","first_name":"B1","last_name":"LAST_NAME_1_CABA"},
			"skill":{"skill_name":"SKILL_NAME_1"},
			
			"exam_status":{
			"percent_complete":1,
			"exam_state":"NOTSTARTED",
			"time_remaining":1,
			"time_started":null,
			"time_stopped":null}
		},
		{
			"completed":"3/4/5",
			"score":"34",
		
		  "status":"STATUS_002",
			"token":"TOKEN_002_GHI_JKL",
			"candidate":{"email":"EMAIL_002","first_name":"C2","last_name":"LAST_NAME_2_ABBA"},
			"skill":{"skill_name":"SKILL_NAME_2"},
			
			"exam_status":{
			"percent_complete":2,
			"exam_state":"NOTSTARTED",
			"time_remaining":2,
			"time_started":null,
			"time_stopped":null}
		},
		{
			"completed":"4/5/6",
			"score":"45",
		
		  "status":"STATUS_003",
			"token":"TOKEN_003_JKL_LMN",
			"candidate":{"email":"EMAIL_003","first_name":"D3","last_name":"LAST_NAME_3_DEVO"},
			"skill":{"skill_name":"SKILL_NAME_3"},
			
			"exam_status":{
			"percent_complete":3,
			"exam_state":"NOTSTARTED",
			"time_remaining":3,
			"time_started":null,
			"time_stopped":null}
		}
	]
	
</script>


</body>
</html>
<!--   10|       20|       30|       40|       50|       60|       70|       -->
<!--5678901234567890123456789012345678901234567890123456789012345678901234567-->